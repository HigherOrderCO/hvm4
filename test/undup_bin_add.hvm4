@when = λ{[]: λx.x; <>: λ{0: λt. &{}; 1: λt,x. @when(t, x)}}
@Y    = λ&f. f(@Y(f))

@O = λx.#O{x}
@I = λx.#I{x}
@E = #E

@add = λ&add. λ{
  #O: λ&a. λ{
    #O: λ&b. λ{
      0: &A{@O,@I}(add(a,b,&B{0,1}))
      1: &C{@O,@I}(add(a,b,&D{0,1}))
    }
    #I: λ&b. λ{
      0: &E{@O,@I}(add(a,b,&F{0,1}))
      1: &G{@O,@I}(add(a,b,&H{0,1}))
    }
    #E: λc. #E
  }
  #I: λ&a. λ{
    #O: λ&b. λ{
      0: &I{@O,@I}(add(a,b,&J{0,1}))
      1: &K{@O,@I}(add(a,b,&L{0,1}))
    }
    #I: λ&b. λ{
      0: &M{@O,@I}(add(a,b,&N{0,1}))
      1: &O{@O,@I}(add(a,b,&P{0,1}))
    }
    #E: λc. #E
  }
  #E: λb. λc. #E
}

@main =
  ! e0 = @Y(@add)(@I(@O(@O(@O(@E)))), @O(@I(@O(@O(@E)))), 0) === @I(@I(@O(@O(@E)))) //  1 + 2 =  3
  ! e1 = @Y(@add)(@O(@O(@I(@O(@E)))), @I(@O(@O(@O(@E)))), 0) === @I(@O(@I(@O(@E)))) //  4 + 1 =  5
  ! e2 = @Y(@add)(@I(@I(@I(@O(@E)))), @I(@O(@I(@O(@E)))), 0) === @O(@O(@I(@I(@E)))) //  7 + 5 = 12
  ! e3 = @Y(@add)(@I(@O(@O(@I(@E)))), @O(@O(@I(@O(@E)))), 0) === @I(@O(@I(@I(@E)))) //  9 + 4 = 13
  ! e4 = @Y(@add)(@I(@I(@O(@O(@E)))), @I(@O(@O(@O(@E)))), 0) === @O(@O(@I(@O(@E)))) //  3 + 1 =  4
  ! e5 = @Y(@add)(@I(@I(@O(@I(@E)))), @O(@O(@I(@O(@E)))), 0) === @I(@I(@I(@I(@E)))) // 11 + 4 = 15
  ! e6 = @Y(@add)(@O(@O(@O(@I(@E)))), @I(@I(@O(@O(@E)))), 0) === @I(@I(@O(@I(@E)))) //  8 + 3 = 11
  ! e7 = @Y(@add)(@O(@I(@O(@I(@E)))), @O(@I(@I(@O(@E)))), 0) === @O(@O(@O(@O(@E)))) // 10 + 6 = 16 (overflow wraps)
  @when([e0,e1,e2,e3,e4,e5,e6,e7], @add)
//λa.λ{#O:λb.λ{#O:λc.λ{0:#O{a(b,c,0)};1:#I{a(b,c,0)}};#I:λc.λ{0:#I{a(b,c,0)};1:#O{a(b,c,1)}};#E:λc.#E{}};#I:λb.λ{#O:λc.λ{0:#I{a(b,c,0)};1:#O{a(b,c,1)}};#I:λc.λ{0:#O{a(b,c,1)};1:#I{a(b,c,1)}};#E:λc.#E{}};#E:λb.λc.#E{}} #<10000
